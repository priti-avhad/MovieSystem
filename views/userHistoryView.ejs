<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Watch History</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
  <div class="container mt-5">
    <h2 class="mb-4 text-center">Your Watch History</h2>
    
    <div class="row">
      <% if (history.length > 0) { %>
        <% history.forEach(movie => { %>
          <div class="col-md-3 mb-4">
            <div class="card h-100">
              <img src="<%= movie.posterurl %>" class="card-img-top" alt="poster" style="height: 250px; object-fit: cover;">
              <div class="card-body">
                <h5 class="card-title"><%= movie.title %></h5>
                <p class="card-text text-muted"><%= movie.genre %></p>
                <p class="text-secondary" style="font-size: 0.9rem;">Watched on: <%= new Date(movie.added_at).toLocaleString() %></p>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <p class="text-center">You have not watched any movies yet.</p>
      <% } %>
    </div>
  </div>
</body>
</html>
